{
  "returnableObjects": [
    {
      "id": "RO-001",
      "name": "Customer Communications Profile",
      "description": "A complete customer profile including basic details, mailing address flag, communication preferences, interaction metrics, and segmentation.",
      "structure": {
        "type": "resultSet",
        "columns": [
          {"name": "CustomerID", "type": "INT", "description": "Unique identifier for the customer"},
          {"name": "FirstName", "type": "NVARCHAR", "description": "Customer's first name"},
          {"name": "LastName", "type": "NVARCHAR", "description": "Customer's last name"},
          {"name": "PrimaryEmail", "type": "NVARCHAR", "description": "Customer's primary email address"},
          {"name": "HasMailingAddress", "type": "BIT", "description": "Flag indicating existence of a valid mailing address"},
          {"name": "EmailOptInStatus", "type": "BIT", "description": "Flag indicating explicit email opt-in"},
          {"name": "PostalOptInStatus", "type": "BIT", "description": "Flag indicating explicit postal opt-in"},
          {"name": "LastInteractionDate", "type": "DATETIME", "description": "Most recent date of customer interaction"},
          {"name": "DaysSinceLastInteraction", "type": "INT", "description": "Number of days since the last customer interaction"},
          {"name": "IsActiveCustomer", "type": "BIT", "description": "Flag indicating if the customer holds an active loan"},
          {"name": "OpenedMarketingEmailRecently", "type": "BIT", "description": "Flag indicating recent marketing email open"},
          {"name": "CustomerSegment", "type": "NVARCHAR", "description": "Customer segment based on engagement and loan status"}
        ]
      },
      "relatedBusinessProcess": "PROC-001",
      "returnConditions": [
        {
          "processStepId": "STEP-008",
          "businessFunctionId": "BF-007",
          "condition": "After evaluating segmentation rules based on activity and loan status",
          "description": "The complete profile is returned once the segmentation determination is made."
        }
      ],
      "technicalNotes": "This result set is generated by joining several CTEs; it is read-only and optimized for reporting purposes."
    }
  ],
  "returnScenarios": [
    {
      "id": "RS-001",
      "name": "Default Profile Return",
      "description": "When a valid CustomerID is provided or in bulk, the stored procedure returns a complete customer communications profile.",
      "returnedObjects": [
        {
          "objectId": "RO-001",
          "description": "The complete customer profile as described in RO-001",
          "isRequired": true
        }
      ],
      "triggerCondition": "Successful completion of all processing steps without errors"
    }
  ],
  "sideEffects": {
    "description": "The stored procedure is designed to be read-only and does not produce database writes, but may log execution details externally.",
    "effects": [
      {
        "id": "SE-001",
        "name": "No Direct Database Write",
        "description": "The procedure does not perform any write operations. Any logging is handled outside the scope of this stored procedure.",
        "affectedEntities": [],
        "producedInScenarios": ["RS-001"],
        "producedByFunctions": [],
        "dataWritten": {
          "Field1": "N/A",
          "Field2": "N/A"
        }
      }
    ]
  }
}